<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FoodFutures - Trade the Future of Food</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="cursor-glow"></div>
    
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <span class="logo-text">FoodFutures</span>
                <div class="logo-pulse"></div>
            </div>
            
            <div class="nav-menu">
                <a href="#home" class="nav-link active">Home</a>
                <a href="mrkt.html" class="nav-link">Markets</a>
                <a href="#about" class="nav-link">About</a>
                <a href="#contact" class="nav-link">Contact</a>
            </div>
            
            <div class="nav-actions">
                <div class="language-toggle">
                    <button class="lang-btn active" data-lang="en">EN</button>
                    <button class="lang-btn" data-lang="ko">한국어</button>
                </div>
                <button class="nav-btn login-btn">Login</button>
                <button class="nav-btn signup-btn">Sign Up</button>
            </div>
        </div>
    </nav>

    <main class="main-content">
        <!-- Hero Section -->
        <section class="hero-section">
            <div class="hero-container">
                <h1 class="hero-title">Trade the Future of Food.</h1>
                <p class="hero-subtitle">Invest in a sustainable tomorrow with agricultural commodities.</p>
                <div class="hero-actions">
                    <a href="mrkt.html" class="btn btn-primary">Start Trading Now</a>
                    <a href="#learn" class="btn btn-secondary">Learn More</a>
                </div>
            </div>
        </section>

        <!-- Stats Section -->
        <section class="stats-section">
            <div class="stats-container">
                <div class="stat-item">
                    <span class="stat-number">250K+</span>
                    <span class="stat-label">Transactions</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">40+</span>
                    <span class="stat-label">Commodities</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">100+</span>
                    <span class="stat-label">Countries</span>
                </div>
            </div>
        </section>

        <!-- Trading Card Section -->
        <section class="trading-card-section">
            <div class="trading-card">
                <div class="card-header">
                    <span class="card-symbol">CORN</span>
                    <span class="card-name">Corn Futures</span>
                </div>
                <div class="card-price-container">
                    <span class="current-price" id="tradePrice">$0.00</span>
                    <span class="price-change" id="tradeChange">0.00%</span>
                </div>
                <div class="card-actions">
                    <a href="trade.html?symbol=CORN&action=buy" class="btn btn-primary">Buy Now</a>
                    <a href="trade.html?symbol=CORN&action=sell" class="btn btn-secondary">Sell Now</a>
                </div>
            </div>
        </section>

        <!-- Sample Position Section -->
        <section class="sample-position-section">
            <div class="section-header">
                <h2 class="section-title">Sample Market Position</h2>
            </div>
            <div class="position-card">
                <div class="position-info">
                    <span class="position-symbol">WHEAT</span>
                    <span class="position-name">Wheat</span>
                </div>
                <div class="position-details">
                    <div class="detail-item">
                        <span class="detail-label">Quantity</span>
                        <span class="detail-value" id="sampleQuantity">100.00</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Current Price</span>
                        <span class="detail-value" id="sampleCurrentPrice">$0.00</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">P/L ($)</span>
                        <span class="detail-value" id="sampleProfitLoss">$0.00</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">P/L (%)</span>
                        <span class="detail-value" id="sampleProfitLossPercent">0.00%</span>
                    </div>
                </div>
            </div>
        </section>
        
    </main>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const cursorGlow = document.querySelector('.cursor-glow');
            document.addEventListener('mousemove', (e) => {
                cursorGlow.style.left = `${e.clientX}px`;
                cursorGlow.style.top = `${e.clientY}px`;
            });

            const observerOptions = {
                root: null,
                rootMargin: '0px 0px -100px 0px'
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('animate');
                    }
                });
            }, observerOptions);

            document.querySelectorAll('.stat-item').forEach(stat => {
                observer.observe(stat);
            });
// Redirect Markets button
document.querySelector('.nav-link[href="mrkt.html"]').addEventListener('click', (e) => {
    e.preventDefault();
    window.location.href = 'mrkt.html';
});

            // Animate trading card price
            function animatePrice() {
                const priceElement = document.querySelector('.current-price');
                const changeElement = document.querySelector('.price-change');
                
                const basePrice = 0.68;
                const variation = (Math.random() - 0.5) * 0.1;
                const newPrice = Math.max(0.1, basePrice + variation);
                const change = ((newPrice - basePrice) / basePrice * 100);
                
                priceElement.textContent = `$${newPrice.toFixed(2)}`;
                changeElement.textContent = `${change >= 0 ? '+' : ''}${change.toFixed(1)}%`;
                changeElement.className = `price-change ${change >= 0 ? 'positive' : 'negative'}`;
            }

            // Update price every 3 seconds
            setInterval(animatePrice, 3000);

            // Function to sync the sample position with live market data
            function syncSamplePosition() {
                const marketData = JSON.parse(localStorage.getItem('marketData')) || [];
                const wheatMarket = marketData.find(m => m.symbol === 'WHEAT');

                if (!wheatMarket) {
                    // Initialize a sample position if market data is not available
                    const sampleTradeHistory = [{
                        id: 'sample_trade',
                        symbol: 'WHEAT',
                        name: 'Wheat',
                        action: 'buy',
                        quantity: 100,
                        price: 7.25,
                        timestamp: new Date().toISOString()
                    }];
                    localStorage.setItem('tradeHistory', JSON.stringify(sampleTradeHistory));
                    localStorage.setItem('marketData', JSON.stringify([
                         { id: 1, symbol: 'WHEAT', name: 'Wheat', category: 'grains', basePrice: 7.25, volatility: 0.15, price: 7.25, change: 0 },
                         { id: 2, symbol: 'CORN', name: 'Corn', category: 'grains', basePrice: 5.80, volatility: 0.12, price: 5.80, change: 0 }
                    ]));
                    console.log('Sample position and initial market data created in localStorage.');
                    return;
                }

                const sampleTradeHistory = JSON.parse(localStorage.getItem('tradeHistory')) || [];
                const sampleTrade = sampleTradeHistory.find(trade => trade.symbol === 'WHEAT');
                
                if (sampleTrade) {
                    const currentPrice = wheatMarket.price;
                    const initialPrice = sampleTrade.price;
                    const quantity = sampleTrade.quantity;

                    const currentValue = currentPrice * quantity;
                    const initialValue = initialPrice * quantity;
                    const profitLoss = currentValue - initialValue;
                    const profitLossPercent = (profitLoss / initialValue) * 100;
                    
                    const profitLossClass = profitLoss >= 0 ? 'positive' : 'negative';

                    document.getElementById('sampleCurrentPrice').textContent = `$${currentPrice.toFixed(2)}`;
                    document.getElementById('sampleQuantity').textContent = quantity.toFixed(2);
                    document.getElementById('sampleProfitLoss').textContent = `$${profitLoss.toFixed(2)}`;
                    document.getElementById('sampleProfitLoss').className = `detail-value ${profitLossClass}`;
                    document.getElementById('sampleProfitLossPercent').textContent = `${profitLoss >= 0 ? '+' : ''}${profitLossPercent.toFixed(2)}%`;
                    document.getElementById('sampleProfitLossPercent').className = `detail-value ${profitLossClass}`;
                } else {
                    console.error('Sample trade not found in trade history.');
                }
            }

            // Initial sync and then set an interval for continuous updates
            syncSamplePosition();
            setInterval(syncSamplePosition, 5000);
        });
    </script>
</body>
</html>
